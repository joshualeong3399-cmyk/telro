import{a as k,j as t}from"./index-B5tky5X5.js";import{r as n}from"./vendor-DqoTkSux.js";import{W as C,T as b,X as L,Y as x,Z as r,K as c,_ as R,R as h,$ as v,H as z,l as T,s as D,p as $,z as w}from"./antd-BHLZumV9.js";import{R as g,L as A,C as y,X as p,Y as u,T as m,a as I,b as E,B as K,c as B}from"./BarChart-B-pHKsRm.js";import"./store-DlF-iav1.js";const N={getStats:()=>k.get("/dashboard/stats")},{Title:M}=b;function W(s){const l=Math.floor(s/3600),a=Math.floor(s%3600/60),o=s%60;return l>0?`${l}h ${a}m`:a>0?`${a}m ${o}s`:`${o}s`}const X=[{key:"todayCalls",title:"今日呼叫总量",color:"#1677ff",icon:t.jsx(h,{})},{key:"answeredCalls",title:"接通次数",color:"#52c41a",icon:t.jsx(v,{})},{key:"totalDuration",title:"通话时长",color:"#fa8c16",icon:t.jsx(z,{}),formatter:W},{key:"onlineAgents",title:"在线坐席",color:"#722ed1",icon:t.jsx(T,{})},{key:"queuedCalls",title:"排队数量",color:"#f5222d",icon:t.jsx(D,{})},{key:"recordingsCount",title:"录音数量",color:"#13c2c2",icon:t.jsx($,{})},{key:"monthlySpend",title:"本月消费",color:"#d4b106",icon:t.jsx(w,{}),suffix:"元"},{key:"activeExtensions",title:"活跃分机",color:"#1677ff",icon:t.jsx(h,{})}],Y={stats:{todayCalls:1248,answeredCalls:1103,totalDuration:286740,onlineAgents:18,queuedCalls:3,recordingsCount:1098,monthlySpend:4280,activeExtensions:42},callTrend:[{date:"02-13",calls:980},{date:"02-14",calls:1120},{date:"02-15",calls:870},{date:"02-16",calls:1340},{date:"02-17",calls:1050},{date:"02-18",calls:1190},{date:"02-19",calls:1248}],agentCalls:[{agent:"张伟",calls:87},{agent:"李娜",calls:74},{agent:"王芳",calls:91},{agent:"刘洋",calls:68},{agent:"陈静",calls:82},{agent:"赵磊",calls:55},{agent:"孙敏",calls:79}]},H=()=>{const[s,l]=n.useState(Y),[a,o]=n.useState(!1),[f,d]=n.useState(null);return n.useEffect(()=>{(async()=>{o(!0),d(null);try{const i=await N.getStats();l(i)}catch{d("数据加载失败，显示模拟数据")}finally{o(!1)}})()},[]),t.jsx(C,{spinning:a,children:t.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:16},children:[t.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t.jsx(M,{level:4,style:{margin:0},children:"运营仪表盘"}),f&&t.jsx(L,{message:f,type:"warning",showIcon:!0,closable:!0,style:{padding:"2px 12px"}})]}),t.jsx(x,{gutter:[16,16],children:X.map(e=>{const i=s.stats[e.key],j=e.formatter?e.formatter(i):void 0;return t.jsx(r,{xs:24,sm:12,md:12,lg:6,children:t.jsx(c,{hoverable:!0,styles:{body:{padding:"20px 24px"}},style:{borderTop:`3px solid ${e.color}`},children:t.jsx(R,{title:t.jsx("span",{style:{fontSize:13,color:"#666"},children:e.title}),value:j??i,prefix:t.jsx("span",{style:{color:e.color,marginRight:4},children:e.icon}),suffix:e.suffix,valueStyle:{color:e.color,fontSize:28,fontWeight:700},formatter:e.formatter?void 0:S=>Number(S).toLocaleString("zh-CN")})})},e.key)})}),t.jsxs(x,{gutter:[16,16],children:[t.jsx(r,{xs:24,lg:14,children:t.jsx(c,{title:"近 7 天呼叫趋势",styles:{body:{paddingTop:8}},children:t.jsx(g,{width:"100%",height:280,children:t.jsxs(A,{data:s.callTrend,margin:{top:5,right:20,left:0,bottom:5},children:[t.jsx(y,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),t.jsx(p,{dataKey:"date",tick:{fontSize:12},axisLine:!1,tickLine:!1}),t.jsx(u,{tick:{fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:e=>e.toLocaleString()}),t.jsx(m,{formatter:e=>[e.toLocaleString("zh-CN"),"呼叫量"],contentStyle:{borderRadius:8,fontSize:13}}),t.jsx(I,{}),t.jsx(E,{type:"monotone",dataKey:"calls",name:"呼叫量",stroke:"#1677ff",strokeWidth:2.5,dot:{r:4,fill:"#1677ff"},activeDot:{r:6}})]})})})}),t.jsx(r,{xs:24,lg:10,children:t.jsx(c,{title:"今日坐席通话量 Top 7",styles:{body:{paddingTop:8}},children:t.jsx(g,{width:"100%",height:280,children:t.jsxs(K,{data:s.agentCalls,layout:"vertical",margin:{top:5,right:24,left:8,bottom:5},children:[t.jsx(y,{strokeDasharray:"3 3",stroke:"#f0f0f0",horizontal:!1}),t.jsx(p,{type:"number",tick:{fontSize:12},axisLine:!1,tickLine:!1,tickFormatter:e=>e.toLocaleString()}),t.jsx(u,{type:"category",dataKey:"agent",tick:{fontSize:12},axisLine:!1,tickLine:!1,width:40}),t.jsx(m,{formatter:e=>[e.toLocaleString("zh-CN"),"通话次数"],contentStyle:{borderRadius:8,fontSize:13}}),t.jsx(B,{dataKey:"calls",name:"通话次数",fill:"#1677ff",radius:[0,4,4,0],maxBarSize:22})]})})})})]})]})})};export{H as default};
