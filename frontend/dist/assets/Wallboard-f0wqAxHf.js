import{s as r,j as e}from"./index-B5tky5X5.js";import{r as i}from"./vendor-DqoTkSux.js";import{R as j,$ as I,H as C,l as S,S as u,T as L,a as w,h as v,B as E,a0 as B,Y as T,Z as A,K as z,i as R,A as H}from"./antd-BHLZumV9.js";import"./store-DlF-iav1.js";const{Title:M,Text:l}=L,W=[{agentId:1,agentNo:"A001",name:"å¼ æ™“æ˜Ž",status:"busy",currentCallId:"C10021",lastUpdate:Date.now()},{agentId:2,agentNo:"A002",name:"æŽé›ªæ¢…",status:"online",currentCallId:void 0,lastUpdate:Date.now()},{agentId:3,agentNo:"A003",name:"çŽ‹å»ºå›½",status:"away",currentCallId:void 0,lastUpdate:Date.now()},{agentId:4,agentNo:"A004",name:"é™ˆä¸½åŽ",status:"busy",currentCallId:"C10022",lastUpdate:Date.now()},{agentId:5,agentNo:"A005",name:"èµµæ–‡é¾™",status:"online",currentCallId:void 0,lastUpdate:Date.now()},{agentId:6,agentNo:"A006",name:"å­™æ˜Žæœˆ",status:"offline",currentCallId:void 0,lastUpdate:Date.now()},{agentId:7,agentNo:"A007",name:"å‘¨æµ©ç„¶",status:"busy",currentCallId:"C10023",lastUpdate:Date.now()},{agentId:8,agentNo:"A008",name:"å´ä½³çª",status:"online",currentCallId:void 0,lastUpdate:Date.now()}],Y={totalCalls:128,answeredCalls:115,queuedCalls:3,onlineAgents:5,avgHandleTime:187},x={online:{label:"ç©ºé—²",color:"#52c41a",bg:"#f6ffed",badge:"success"},busy:{label:"é€šè¯ä¸­",color:"#1677ff",bg:"#e6f4ff",badge:"processing"},away:{label:"å°ä¼‘",color:"#fa8c16",bg:"#fff7e6",badge:"warning"},offline:{label:"ç¦»çº¿",color:"#bfbfbf",bg:"#fafafa",badge:"default"}};function _(o){const c=Math.floor(o/3600),a=Math.floor(o%3600/60),g=o%60;return c>0?`${c}h ${a}m`:a>0?`${a}m ${String(g).padStart(2,"0")}s`:`${o}s`}const V=()=>{const[o,c]=i.useState(W),[a,g]=i.useState(Y),[D,b]=i.useState(new Date),p=i.useRef(null),[N,$]=i.useState(new Date);i.useEffect(()=>(p.current=setInterval(()=>$(new Date),1e3),()=>{p.current&&clearInterval(p.current)}),[]),i.useEffect(()=>{r.connect();const t=n=>{b(new Date),c(d=>{const m=d.findIndex(f=>f.agentId===n.agentId),y={...n,lastUpdate:Date.now()};if(m>=0){const f=[...d];return f[m]=y,f}return[...d,y]})},s=n=>{b(new Date),g(d=>({...d,...n}))};return r.on("agent:status",t),r.on("call:update",s),()=>{r.off("agent:status",t),r.off("call:update",s)}},[]);const h=o.reduce((t,s)=>(t[s.status]=(t[s.status]??0)+1,t),{}),U=a.totalCalls>0?Math.round(a.answeredCalls/a.totalCalls*100):0,k=[{title:"ä»Šæ—¥æ¥ç”µ",value:a.totalCalls,suffix:"æ¬¡",color:"#1677ff",icon:e.jsx(j,{}),bg:"#e6f4ff"},{title:"å·²æŽ¥å¬",value:a.answeredCalls,suffix:"æ¬¡",color:"#52c41a",icon:e.jsx(I,{}),bg:"#f6ffed"},{title:"æŽ’é˜Ÿç­‰å¾…",value:a.queuedCalls,suffix:"äºº",color:"#fa8c16",icon:e.jsx(C,{}),bg:"#fff7e6"},{title:"æŽ¥å¬çŽ‡",value:`${U}%`,suffix:"",color:"#722ed1",icon:e.jsx(I,{}),bg:"#f9f0ff"},{title:"åœ¨çº¿åå¸­",value:a.onlineAgents,suffix:"äºº",color:"#13c2c2",icon:e.jsx(S,{}),bg:"#e6fffb"},{title:"é€šè¯ä¸­",value:h.busy??0,suffix:"äºº",color:"#1677ff",icon:e.jsx(j,{}),bg:"#e6f4ff"},{title:"å°ä¼‘",value:h.away??0,suffix:"äºº",color:"#fa8c16",icon:e.jsx(S,{}),bg:"#fff7e6"},{title:"å¹³å‡é€šè¯",value:_(a.avgHandleTime),suffix:"",color:"#eb2f96",icon:e.jsx(C,{}),bg:"#fff0f6"}];return e.jsxs("div",{style:{padding:"20px 24px",minHeight:"100vh",background:"#f0f2f5"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:20,background:"#fff",padding:"12px 20px",borderRadius:8,boxShadow:"0 1px 4px rgba(0,21,41,0.08)"},children:[e.jsxs(u,{children:[e.jsx(M,{level:4,style:{margin:0},children:"ðŸ“Š å®žæ—¶åå¸­ç›‘æŽ§å¤§å±"}),e.jsx(w,{color:"green",children:"LIVE"})]}),e.jsxs(u,{children:[e.jsxs(l,{type:"secondary",style:{fontSize:13},children:["æœ€è¿‘æ›´æ–° ",D.toLocaleTimeString("zh-CN")]}),e.jsx(l,{style:{fontSize:20,fontFamily:"monospace",fontWeight:600},children:N.toLocaleTimeString("zh-CN")}),e.jsx(v,{title:"åˆ·æ–°è¿žæŽ¥",children:e.jsx(E,{icon:e.jsx(B,{}),size:"small",onClick:()=>{r.disconnect(),setTimeout(()=>r.connect(),300)}})})]})]}),e.jsx(T,{gutter:[12,12],style:{marginBottom:20},children:k.map(t=>e.jsx(A,{xs:12,sm:8,md:6,xl:3,children:e.jsx(z,{size:"small",style:{borderRadius:8,borderTop:`3px solid ${t.color}`,boxShadow:"0 1px 4px rgba(0,21,41,0.06)"},styles:{body:{padding:"12px 14px"}},children:e.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:8},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:6,background:t.bg,display:"flex",alignItems:"center",justifyContent:"center",color:t.color,fontSize:15,flexShrink:0},children:t.icon}),e.jsxs("div",{style:{minWidth:0},children:[e.jsx(l,{type:"secondary",style:{fontSize:11,display:"block"},children:t.title}),e.jsxs(l,{strong:!0,style:{fontSize:20,color:t.color,lineHeight:1.3},children:[t.value,t.suffix&&e.jsx("span",{style:{fontSize:12,color:"#999",marginLeft:2},children:t.suffix})]})]})]})})},t.title))}),e.jsx(z,{title:e.jsx("span",{style:{fontWeight:600},children:"åå¸­çŠ¶æ€"}),extra:e.jsx(u,{children:["online","busy","away","offline"].map(t=>e.jsxs(u,{size:4,children:[e.jsx(R,{status:x[t].badge}),e.jsxs(l,{style:{fontSize:12,color:x[t].color},children:[x[t].label," ",h[t]??0]})]},t))}),style:{borderRadius:8,boxShadow:"0 1px 4px rgba(0,21,41,0.06)"},children:e.jsx(T,{gutter:[12,12],children:o.map(t=>{const s=x[t.status];return e.jsx(A,{xs:12,sm:8,md:6,lg:4,xl:3,children:e.jsx(v,{title:t.currentCallId?`é€šè¯ID: ${t.currentCallId}`:`æœ€è¿‘æ›´æ–°: ${new Date(t.lastUpdate).toLocaleTimeString("zh-CN")}`,children:e.jsxs("div",{style:{background:s.bg,border:`1.5px solid ${s.color}33`,borderRadius:8,padding:"10px 12px",textAlign:"center",cursor:"default",transition:"transform 0.2s"},onMouseEnter:n=>n.currentTarget.style.transform="translateY(-2px)",onMouseLeave:n=>n.currentTarget.style.transform="translateY(0)",children:[e.jsx(R,{status:s.badge,dot:!0,offset:[-4,4],styles:{indicator:{width:10,height:10}},children:e.jsx(H,{size:40,style:{background:s.color,marginBottom:6},children:t.name[0]})}),e.jsxs("div",{style:{marginTop:2},children:[e.jsx(l,{strong:!0,style:{fontSize:13,display:"block"},children:t.name}),e.jsx(l,{type:"secondary",style:{fontSize:11},children:t.agentNo})]}),e.jsx(w,{color:s.color,style:{marginTop:6,fontSize:11,padding:"0 6px"},children:s.label}),t.currentCallId&&e.jsx("div",{style:{marginTop:4},children:e.jsxs(l,{style:{fontSize:10,color:s.color},children:["ðŸ“ž ",t.currentCallId]})})]})})},t.agentId)})})})]})};export{V as default};
