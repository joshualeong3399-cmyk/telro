import{j as e}from"./index-B5tky5X5.js";import{r as c}from"./vendor-DqoTkSux.js";import{N as a,K as S,a5 as A,B as l,a4 as O,M as p,O as u,a6 as i,a7 as $,ad as z,a as L,S as M,h as n,ag as V,a8 as B,a1 as E,ae as N,a3 as D,Q as r}from"./antd-BHLZumV9.js";import"./store-DlF-iav1.js";const{TextArea:P}=u,{RangePicker:_}=$,H=()=>{const[f,m]=c.useState(!1),[g,o]=c.useState(!1),[C,x]=c.useState(null),[d]=a.useForm(),[w]=c.useState([{id:1,name:"春季促销活动",status:"active",customerList:"客户列表A",totalCount:1e3,completedCount:350,successCount:120,successRate:34.29,aiFlowId:1,aiFlowName:"保险销售话术",startTime:"2026-02-15 09:00:00",createdAt:"2026-02-10 10:00:00"},{id:2,name:"客户回访调研",status:"paused",customerList:"客户列表B",totalCount:500,completedCount:200,successCount:150,successRate:75,startTime:"2026-02-12 14:00:00",createdAt:"2026-02-08 15:30:00"},{id:3,name:"贷款邀约活动",status:"completed",customerList:"客户列表C",totalCount:800,completedCount:800,successCount:240,successRate:30,aiFlowId:2,aiFlowName:"金融产品推广",startTime:"2026-02-01 10:00:00",endTime:"2026-02-10 18:00:00",createdAt:"2026-01-28 11:00:00"}]),h={active:{text:"进行中",color:"green"},paused:{text:"已暂停",color:"orange"},completed:{text:"已完成",color:"blue"},pending:{text:"待开始",color:"default"}},I=[{title:"ID",dataIndex:"id",width:70},{title:"活动名称",dataIndex:"name",width:180},{title:"状态",dataIndex:"status",width:100,render:t=>e.jsx(L,{color:h[t].color,children:h[t].text})},{title:"客户列表",dataIndex:"customerList",width:150},{title:"进度",width:200,render:(t,s)=>{const j=(s.completedCount/s.totalCount*100).toFixed(1);return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:4},children:[s.completedCount," / ",s.totalCount," (",j,"%)"]}),e.jsx("div",{style:{width:"100%",height:8,background:"#f0f0f0",borderRadius:4,overflow:"hidden"},children:e.jsx("div",{style:{width:`${j}%`,height:"100%",background:s.status==="completed"?"#52c41a":"#1677ff",transition:"width 0.3s"}})})]})}},{title:"成功数/率",width:120,render:(t,s)=>e.jsxs("div",{children:[e.jsx("div",{children:s.successCount}),e.jsxs("div",{style:{fontSize:12,color:"#999"},children:[s.successRate.toFixed(2),"%"]})]})},{title:"AI 流程",dataIndex:"aiFlowName",width:150,render:t=>t||e.jsx("span",{style:{color:"#999"},children:"未绑定"})},{title:"开始时间",dataIndex:"startTime",width:160},{title:"操作",fixed:"right",width:200,render:(t,s)=>e.jsxs(M,{size:"small",children:[s.status==="active"&&e.jsx(n,{title:"暂停",children:e.jsx(l,{type:"link",size:"small",icon:e.jsx(V,{}),onClick:()=>T(s.id)})}),s.status==="paused"&&e.jsx(n,{title:"继续",children:e.jsx(l,{type:"link",size:"small",icon:e.jsx(B,{}),onClick:()=>F(s.id)})}),e.jsx(n,{title:"编辑",children:e.jsx(l,{type:"link",size:"small",icon:e.jsx(E,{}),onClick:()=>v(s)})}),e.jsx(n,{title:"复制",children:e.jsx(l,{type:"link",size:"small",icon:e.jsx(N,{}),onClick:()=>k(s.id)})}),e.jsx(n,{title:"删除",children:e.jsx(l,{type:"link",size:"small",danger:!0,icon:e.jsx(D,{}),onClick:()=>b(s.id)})})]})}],y=()=>{x(null),d.resetFields(),o(!0)},v=t=>{x(t),d.setFieldsValue(t),o(!0)},b=t=>{p.confirm({title:"确认删除",content:"确定要删除此群呼活动吗？",okText:"确定",cancelText:"取消",onOk:()=>{r.success("删除成功")}})},k=t=>{r.success(`已复制活动 #${t}`)},T=t=>{r.success(`已暂停活动 #${t}`)},F=t=>{r.success(`已恢复活动 #${t}`)},R=async()=>{try{await d.validateFields(),m(!0),o(!1)}catch{}finally{m(!1)}};return e.jsxs("div",{style:{padding:24},children:[e.jsx(S,{title:"群呼活动管理",extra:e.jsx(l,{type:"primary",icon:e.jsx(O,{}),onClick:y,children:"新建活动"}),children:e.jsx(A,{columns:I,dataSource:w,rowKey:"id",scroll:{x:1400},pagination:{pageSize:10,showSizeChanger:!0,showTotal:t=>`共 ${t} 条`}})}),e.jsx(p,{title:C?"编辑活动":"新建活动",open:g,onOk:R,onCancel:()=>o(!1),confirmLoading:f,width:700,destroyOnClose:!0,children:e.jsxs(a,{form:d,layout:"vertical",style:{marginTop:24},children:[e.jsx(a.Item,{name:"name",label:"活动名称",rules:[{required:!0,message:"请输入活动名称"}],children:e.jsx(u,{placeholder:"例如：春季促销活动"})}),e.jsx(a.Item,{name:"customerListId",label:"客户列表",rules:[{required:!0,message:"请选择客户列表"}],children:e.jsxs(i,{placeholder:"选择客户列表",children:[e.jsx(i.Option,{value:1,children:"客户列表A（1000 人）"}),e.jsx(i.Option,{value:2,children:"客户列表B（500 人）"}),e.jsx(i.Option,{value:3,children:"客户列表C（800 人）"})]})}),e.jsx(a.Item,{name:"aiFlowId",label:"AI 流程（可选）",children:e.jsxs(i,{placeholder:"选择 AI 话术流程",allowClear:!0,children:[e.jsx(i.Option,{value:1,children:"保险销售话术"}),e.jsx(i.Option,{value:2,children:"金融产品推广"}),e.jsx(i.Option,{value:3,children:"电商客户回访"})]})}),e.jsx(a.Item,{name:"timeRange",label:"执行时间",rules:[{required:!0,message:"请选择执行时间"}],children:e.jsx(_,{showTime:!0,style:{width:"100%"}})}),e.jsx(a.Item,{name:"maxConcurrent",label:"最大并发数",initialValue:10,children:e.jsx(u,{type:"number",min:1,max:100,addonAfter:"路"})}),e.jsx(a.Item,{name:"retryTimes",label:"重拨次数",initialValue:2,children:e.jsx(u,{type:"number",min:0,max:5,addonAfter:"次"})}),e.jsx(a.Item,{name:"dtmfEnabled",label:"DTMF 按键检测",valuePropName:"checked",initialValue:!1,children:e.jsx(z,{})}),e.jsx(a.Item,{name:"description",label:"活动描述",children:e.jsx(P,{rows:3,placeholder:"填写活动描述信息"})})]})})]})};export{H as default};
