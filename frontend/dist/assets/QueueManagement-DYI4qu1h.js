import{j as e}from"./index-B5tky5X5.js";import{r as l}from"./vendor-DqoTkSux.js";import{N as a,K as O,a5 as S,B as r,a4 as k,M as x,O as h,a6 as i,ah as d,a as o,S as A,a1 as F,a3 as T,Q as V}from"./antd-BHLZumV9.js";import"./store-DlF-iav1.js";const z=()=>{const[j,c]=l.useState(!1),[g,n]=l.useState(!1),[p,u]=l.useState(null),[s]=a.useForm(),[w]=l.useState([{id:1,name:"销售队列",extension:"6001",strategy:"ringall",timeout:30,maxWait:300,memberCount:8,waitingCount:3,status:"active",createdAt:"2026-01-15 10:00:00"},{id:2,name:"客服队列",extension:"6002",strategy:"leastrecent",timeout:25,maxWait:600,memberCount:12,waitingCount:5,status:"active",createdAt:"2026-01-20 14:30:00"},{id:3,name:"技术支持",extension:"6003",strategy:"fewestcalls",timeout:20,maxWait:300,memberCount:5,waitingCount:0,status:"active",createdAt:"2026-02-01 09:00:00"}]),f={ringall:"全部响铃",leastrecent:"最少最近接听",fewestcalls:"最少接听次数",random:"随机分配",rrmemory:"轮询记忆"},y=[{title:"ID",dataIndex:"id",width:70},{title:"队列名称",dataIndex:"name",width:150},{title:"队列号码",dataIndex:"extension",width:120},{title:"分配策略",dataIndex:"strategy",width:150,render:t=>f[t]},{title:"响铃超时",dataIndex:"timeout",width:100,render:t=>`${t} 秒`},{title:"最大等待",dataIndex:"maxWait",width:100,render:t=>`${t} 秒`},{title:"成员数",dataIndex:"memberCount",width:100,render:t=>e.jsxs(o,{color:"blue",children:[t," 人"]})},{title:"排队数",dataIndex:"waitingCount",width:100,render:t=>e.jsxs(o,{color:t>0?"orange":"default",children:[t," 人"]})},{title:"状态",dataIndex:"status",width:100,render:t=>e.jsx(o,{color:t==="active"?"green":"default",children:t==="active"?"启用":"禁用"})},{title:"创建时间",dataIndex:"createdAt",width:160},{title:"操作",fixed:"right",width:150,render:(t,m)=>e.jsxs(A,{children:[e.jsx(r,{type:"link",size:"small",icon:e.jsx(F,{}),onClick:()=>v(m),children:"编辑"}),e.jsx(r,{type:"link",size:"small",danger:!0,icon:e.jsx(T,{}),onClick:()=>b(m.id),children:"删除"})]})}],I=()=>{u(null),s.resetFields(),n(!0)},v=t=>{u(t),s.setFieldsValue(t),n(!0)},b=t=>{x.confirm({title:"确认删除",content:"确定要删除此队列吗？删除后将无法恢复。",okText:"确定",cancelText:"取消",onOk:()=>{V.success("删除成功")}})},C=async()=>{try{await s.validateFields(),c(!0),n(!1)}catch{}finally{c(!1)}};return e.jsxs("div",{style:{padding:24},children:[e.jsx(O,{title:"呼叫队列管理",extra:e.jsx(r,{type:"primary",icon:e.jsx(k,{}),onClick:I,children:"新建队列"}),children:e.jsx(S,{columns:y,dataSource:w,rowKey:"id",scroll:{x:1300},pagination:{pageSize:10,showSizeChanger:!0,showTotal:t=>`共 ${t} 条`}})}),e.jsx(x,{title:p?"编辑队列":"新建队列",open:g,onOk:C,onCancel:()=>n(!1),confirmLoading:j,width:600,destroyOnClose:!0,children:e.jsxs(a,{form:s,layout:"vertical",style:{marginTop:24},children:[e.jsx(a.Item,{name:"name",label:"队列名称",rules:[{required:!0,message:"请输入队列名称"}],children:e.jsx(h,{placeholder:"例如：销售队列"})}),e.jsx(a.Item,{name:"extension",label:"队列号码",rules:[{required:!0,message:"请输入队列号码"},{pattern:/^\d{4,6}$/,message:"队列号码为 4-6 位数字"}],children:e.jsx(h,{placeholder:"例如：6001",maxLength:6})}),e.jsx(a.Item,{name:"strategy",label:"分配策略",rules:[{required:!0,message:"请选择分配策略"}],children:e.jsxs(i,{placeholder:"选择呼叫分配策略",children:[e.jsx(i.Option,{value:"ringall",children:"全部响铃（所有成员同时响铃）"}),e.jsx(i.Option,{value:"leastrecent",children:"最少最近接听（优先分配给最久未接听的坐席）"}),e.jsx(i.Option,{value:"fewestcalls",children:"最少接听次数（优先分配给接听次数最少的坐席）"}),e.jsx(i.Option,{value:"random",children:"随机分配"}),e.jsx(i.Option,{value:"rrmemory",children:"轮询记忆（轮流分配并记住上次位置）"})]})}),e.jsx(a.Item,{name:"timeout",label:"响铃超时",rules:[{required:!0,message:"请输入响铃超时时间"}],initialValue:30,children:e.jsx(d,{min:5,max:300,addonAfter:"秒",style:{width:"100%"}})}),e.jsx(a.Item,{name:"maxWait",label:"最大等待时间",rules:[{required:!0,message:"请输入最大等待时间"}],initialValue:300,children:e.jsx(d,{min:30,max:3600,addonAfter:"秒",style:{width:"100%"}})}),e.jsx(a.Item,{name:"announceFrequency",label:"播报频率",initialValue:60,children:e.jsx(d,{min:0,max:300,addonAfter:"秒",style:{width:"100%"}})}),e.jsx(a.Item,{name:"status",label:"队列状态",initialValue:"active",children:e.jsxs(i,{children:[e.jsx(i.Option,{value:"active",children:"启用"}),e.jsx(i.Option,{value:"inactive",children:"禁用"})]})})]})})]})};export{z as default};
