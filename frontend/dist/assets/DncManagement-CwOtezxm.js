import{j as e}from"./index-B5tky5X5.js";import{r as n}from"./vendor-DqoTkSux.js";import{N as r,K as X,a5 as v,S as B,B as o,ai as m,a9 as R,a3 as f,a4 as $,M as c,O as j,aj as z,a as A,a2 as D,Q as s}from"./antd-BHLZumV9.js";import"./store-DlF-iav1.js";const q=()=>{const[g,x]=n.useState(!1),[y,l]=n.useState(!1),[S,i]=n.useState(!1),[a,h]=n.useState([]),[d]=r.useForm(),[b]=n.useState([{id:1,phoneNumber:"13800138000",reason:"用户主动要求加入黑名单",source:"manual",createdBy:"admin",createdAt:"2026-02-15 10:30:00"},{id:2,phoneNumber:"13900139000",reason:"多次投诉骚扰",source:"auto",createdBy:"system",createdAt:"2026-02-14 16:20:00"},{id:3,phoneNumber:"13700137000",reason:"批量导入黑名单",source:"import",createdBy:"operator01",createdAt:"2026-02-10 09:00:00"}]),p={manual:{text:"手动添加",color:"blue"},auto:{text:"自动添加",color:"orange"},import:{text:"批量导入",color:"green"}},T=[{title:"ID",dataIndex:"id",width:70},{title:"电话号码",dataIndex:"phoneNumber",width:150},{title:"加入原因",dataIndex:"reason",ellipsis:!0},{title:"来源",dataIndex:"source",width:120,render:t=>e.jsx(A,{color:p[t].color,children:p[t].text})},{title:"添加人",dataIndex:"createdBy",width:120},{title:"添加时间",dataIndex:"createdAt",width:170},{title:"操作",fixed:"right",width:100,render:(t,u)=>e.jsx(D,{title:"确认移除",description:"确定要将此号码从黑名单中移除吗？",onConfirm:()=>I(u.id),okText:"确定",cancelText:"取消",children:e.jsx(o,{type:"link",size:"small",danger:!0,icon:e.jsx(f,{}),children:"移除"})})}],w={name:"file",accept:".txt,.csv,.xlsx",beforeUpload:t=>t.type==="text/plain"||t.type==="text/csv"||t.type==="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"?(t.size/1024/1024<10||s.error("文件大小不能超过 10MB！"),!1):(s.error("仅支持 TXT、CSV、XLSX 格式文件！"),!1),onChange:t=>{}},C=()=>{d.resetFields(),l(!0)},I=t=>{s.success(`已移除号码 #${t}`)},k=()=>{if(a.length===0){s.warning("请先选择要移除的号码");return}c.confirm({title:"批量移除确认",content:`确定要移除选中的 ${a.length} 个号码吗？`,okText:"确定",cancelText:"取消",onOk:()=>{s.success(`已批量移除 ${a.length} 个号码`),h([])}})},M=()=>{s.success("导出功能开发中")},L=()=>{i(!0)},N=()=>{s.success("批量导入成功"),i(!1)},V=async()=>{try{await d.validateFields(),x(!0),l(!1)}catch{}finally{x(!1)}};return e.jsxs("div",{style:{padding:24},children:[e.jsx(X,{title:"DNC 黑名单管理",extra:e.jsxs(B,{children:[e.jsx(o,{icon:e.jsx(m,{}),onClick:L,children:"批量导入"}),e.jsx(o,{icon:e.jsx(R,{}),onClick:M,children:"导出列表"}),e.jsxs(o,{danger:!0,icon:e.jsx(f,{}),onClick:k,disabled:a.length===0,children:["批量移除 (",a.length,")"]}),e.jsx(o,{type:"primary",icon:e.jsx($,{}),onClick:C,children:"手动添加"})]}),children:e.jsx(v,{rowSelection:{selectedRowKeys:a,onChange:h},columns:T,dataSource:b,rowKey:"id",pagination:{pageSize:10,showSizeChanger:!0,showTotal:t=>`共 ${t} 条黑名单号码`}})}),e.jsx(c,{title:"手动添加黑名单",open:y,onOk:V,onCancel:()=>l(!1),confirmLoading:g,destroyOnClose:!0,children:e.jsxs(r,{form:d,layout:"vertical",style:{marginTop:24},children:[e.jsx(r.Item,{name:"phoneNumber",label:"电话号码",rules:[{required:!0,message:"请输入电话号码"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码"}],children:e.jsx(j,{placeholder:"例如：13800138000",maxLength:11})}),e.jsx(r.Item,{name:"reason",label:"加入原因",rules:[{required:!0,message:"请输入加入原因"}],children:e.jsx(j.TextArea,{rows:3,placeholder:"填写号码加入黑名单的原因"})})]})}),e.jsx(c,{title:"批量导入黑名单",open:S,onOk:N,onCancel:()=>i(!1),width:600,children:e.jsxs("div",{style:{padding:"24px 0"},children:[e.jsxs(z.Dragger,{...w,maxCount:1,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(m,{style:{fontSize:48,color:"#1677ff"}})}),e.jsx("p",{className:"ant-upload-text",children:"点击或拖拽文件到此区域上传"}),e.jsx("p",{className:"ant-upload-hint",children:"支持 TXT、CSV、XLSX 格式，每行一个手机号码"})]}),e.jsxs("div",{style:{marginTop:16,padding:12,background:"#f5f5f5",borderRadius:4},children:[e.jsx("p",{style:{margin:0,fontSize:12,color:"#666"},children:e.jsx("strong",{children:"文件格式要求："})}),e.jsxs("ul",{style:{margin:"8px 0",paddingLeft:20,fontSize:12,color:"#666"},children:[e.jsx("li",{children:"TXT 文件：每行一个手机号码"}),e.jsx("li",{children:"CSV 文件：第一列为手机号码"}),e.jsx("li",{children:"XLSX 文件：第一列为手机号码"}),e.jsx("li",{children:"单次最多导入 10000 条"})]})]})]})})]})};export{q as default};
